USE master
GO

IF DB_ID(N'FINAL_PROJECT_G1_FINANCIAL') IS NOT NULL
DROP DATABASE FINAL_PROJECT_G1_FINANCIAL
GO

CREATE DATABASE FINAL_PROJECT_G1_FINANCIAL
GO

USE FINAL_PROJECT_G1_FINANCIAL
GO

CREATE TABLE CITY (
	CITY_ID				INT	IDENTITY(10000, 1)		PRIMARY KEY CHECK(CITY_ID > 9999 AND CITY_ID <= 99999),
	CITY_NAME			VARCHAR(50)					NOT NULL,
	CITY_BRANCH_COUNT	INT							NOT NULL CHECK(CITY_BRANCH_COUNT > -1 AND CITY_BRANCH_COUNT <= 99999)
)
GO

INSERT INTO CITY VALUES ('Vancouver', 1)
INSERT INTO CITY VALUES ('Richmond', 1)
INSERT INTO CITY VALUES ('Surrey', 1)
INSERT INTO CITY VALUES ('Burnaby', 1)
INSERT INTO CITY VALUES ('Delta', 1)
INSERT INTO CITY VALUES ('Toronto', 1)
INSERT INTO CITY VALUES ('Montreal', 1)
INSERT INTO CITY VALUES ('Victoria', 1)
INSERT INTO CITY VALUES ('Quebec City', 1)
INSERT INTO CITY VALUES ('Calgary', 1)
GO

CREATE TABLE BRANCH (
	BRANCH_ID			INT IDENTITY(10000, 1)			PRIMARY KEY CHECK(BRANCH_ID > 9999 AND BRANCH_ID <= 99999),
	COMP_ID				INT								NOT NULL CHECK(COMP_ID > 9999 AND COMP_ID <= 99999),
	CITY_ID				INT								FOREIGN KEY REFERENCES CITY(CITY_ID) NOT NULL CHECK(CITY_ID > 9999 AND CITY_ID <= 99999),
	MANAGER_EMP_ID		INT								NOT NULL CHECK(MANAGER_EMP_ID > 9999 AND MANAGER_EMP_ID <= 99999),
	BRANCH_ADDRESS		VARCHAR(70)						NOT NULL
)
GO

INSERT INTO BRANCH VALUES (10000, 10000, 10000, 'A8U 1H2, ABC Road, Vancouver, BC, CA')
INSERT INTO BRANCH VALUES (10000, 10001, 10001, 'AU1 U29, Bobby Street, Richmond, BC, CA')
INSERT INTO BRANCH VALUES (10000, 10002, 10002, 'KS8 IW8, James Avenue, Surrey, BC, CA')
INSERT INTO BRANCH VALUES (10000, 10003, 10003, 'KA9 92K, Jones Street, Burnaby, BC, CA')
INSERT INTO BRANCH VALUES (10000, 10004, 10004, 'KS9 23D, 7890 Avenue, Delta, BC, CA')
INSERT INTO BRANCH VALUES (10000, 10005, 10005, 'L12 83H, 1234 Road, Toronto, ON, CA')
INSERT INTO BRANCH VALUES (10000, 10006, 10006, 'Y28 Z92, 1234 Street, Montreal, QC, CA')
INSERT INTO BRANCH VALUES (10000, 10007, 10007, 'IOQ 812, Fork Road, Victoria, BC, CA')
INSERT INTO BRANCH VALUES (10000, 10008, 10008, 'QIW 192, Dalley Street, Quebec City, QC, CA')
INSERT INTO BRANCH VALUES (10000, 10009, 10009, 'B87 X68, Cookie Road, Calgary, AB, CA')
GO

CREATE TABLE COMPANY (
	COMP_ID				INT	IDENTITY(10000, 1)			PRIMARY KEY CHECK(COMP_ID > 9999 AND COMP_ID <= 99999),
	DIRECTOR_EMP_ID		INT								NOT NULL CHECK(DIRECTOR_EMP_ID > 9999 AND DIRECTOR_EMP_ID <= 99999),
	COMP_NAME			VARCHAR(50)						NOT NULL,
	COMP_EMP_COUNT		INT								NOT NULL CHECK(COMP_EMP_COUNT > -1 AND COMP_EMP_COUNT <= 99999)
)
GO

INSERT INTO COMPANY VALUES (10009, 'G1 Financial', 15)
GO

CREATE TABLE EMPLOYEE (
	EMP_ID				INT IDENTITY(10000, 1)			PRIMARY KEY CHECK(EMP_ID > 9999 AND EMP_ID <= 99999),
	BRANCH_ID			INT								FOREIGN KEY REFERENCES BRANCH(BRANCH_ID) NOT NULL CHECK(BRANCH_ID > 9999 AND BRANCH_ID <= 99999),
	MANAGER_EMP_ID		INT								FOREIGN KEY REFERENCES EMPLOYEE(EMP_ID) NOT NULL CHECK(MANAGER_EMP_ID > 9999 AND MANAGER_EMP_ID <= 99999),
	EMP_HIRE_DATE		DATE							NOT NULL,
	EMP_POSITION		VARCHAR(30)						NOT NULL,
	EMP_HOUR_PAY		NUMERIC(6, 2)					NOT NULL CHECK(EMP_HOUR_PAY >= 0 AND EMP_HOUR_PAY <= 9999.99),
	EMP_FNAME			VARCHAR(50)						NOT NULL,
	EMP_LNAME			VARCHAR(50)						NOT NULL,
	EMP_MNAME			VARCHAR(50),
	EMP_PHONE_NUM		CHAR(10),
	EMP_ADDRESS			VARCHAR(70)						NOT NULL
)
GO

INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10000, 10000, '2016-03-21', 'Manager', 24.21, 'James', 'Charles', NULL, '7781231234', 'NS7 AS8, 234 Street, Vancouver, BC, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10001, 10001, '2016-02-21', 'Manager', 34.21, 'Tim', 'Cook', NULL, '1231232342', 'Y17 298, Fish Avenue, Richmond, BC, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10002, 10002, '2016-02-21', 'Manager', 23.32, 'Wong', 'Ling', NULL, NULL, 'AIS 128, Bobby Road, Surrey, BC, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10003, 10003, '2017-11-16', 'Manager', 25.23, 'Kevin', 'Song', NULL, '8273748372', 'KSO 92I, Towney Avenue, Burnaby, BC, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10004, 10004, '2016-02-11', 'Manager', 24.12, 'Abram', 'Quinton', NULL, '283827397', 'ISD 823, Fish Harbour, Delta, BC, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10005, 10005, '2017-4-06', 'Manager', 30.11, 'Jianfen', 'Deng', 'Norton', NULL, 'XC8 72Y, Jones Street, Toronto, ON, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10006, 10006, '2019-02-19', 'Manager', 26.16, 'Sehaj', 'Bobington', NULL, '2938392755', 'ISH 8WY, 533 Street, Montreal, QC, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10007, 10007, '2020-05-24', 'Manager', 20.83, 'Timmy', 'Wong', NULL, '9387463526', 'KSI 8WY, Bread Street, Victoria, BC, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10008, 10008, '2017-01-03', 'Manager', 31.83, 'Chris', 'Chen', NULL, '2837462527', 'ISU 82Y, Crooked Road, Quebec City, QC, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10009, 10009, '2015-01-21', 'Director', 27.23, 'Ethan', 'Hsu', NULL, '6048887293', 'IXU 82Y, Brown Avenue, Calgary, AB, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10001, 10001, '2018-01-21', 'Janitor', 14.21, 'Raymond', 'Brown', 'Bob', NULL, 'IWU 8SM, Green Road, Richmond, BC, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10002, 10002, '2020-01-01', 'Clerk', 19.21, 'Mandy', 'Chan', NULL, NULL, 'ALS UD8, Totem Street, Surrey, BC, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10003, 10003, '2020-06-26', 'Clerk', 18.35, 'Nathan', 'Smith', NULL, NULL, 'USY X82, Pinball Avenue, Burnaby, BC, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10004, 10004, '2018-12-25', 'Clerk', 19.54, 'Johnathan', 'Chu', 'Billy', '2938475648', '92J AZ8, Dill Street, Delta, BC, CA')
INSERT INTO EMPLOYEE (BRANCH_ID, MANAGER_EMP_ID, EMP_HIRE_DATE, EMP_POSITION, EMP_HOUR_PAY, EMP_FNAME, EMP_LNAME, EMP_MNAME, EMP_PHONE_NUM, EMP_ADDRESS)
	VALUES (10005, 10005, '2019-11-16', 'Janitor', 14.21, 'Alice', 'Hunter', NULL, NULL, 'HUD 8SH, Counter Strike Road, Toronto, ON, CA')
GO

ALTER TABLE BRANCH
	ADD FOREIGN KEY (COMP_ID) REFERENCES COMPANY(COMP_ID),
		FOREIGN KEY (MANAGER_EMP_ID) REFERENCES EMPLOYEE(EMP_ID)

ALTER TABLE COMPANY
	ADD FOREIGN KEY (DIRECTOR_EMP_ID) REFERENCES EMPLOYEE(EMP_ID)

CREATE TABLE BANKING_LICENSE (
	LCNS_ID				INT IDENTITY(10000, 1)			PRIMARY KEY CHECK(LCNS_ID > 9999 AND LCNS_ID <= 99999),
	EMP_ID				INT								FOREIGN KEY REFERENCES EMPLOYEE(EMP_ID) CHECK(EMP_ID > 9999 AND EMP_ID <= 99999),
	LCNS_NAME			VARCHAR(50)						NOT NULL,
	LCNS_GET_DATE		DATE,
	LCNS_EXPIRE_DATE	DATE
)
GO

INSERT INTO BANKING_LICENSE (EMP_ID, LCNS_NAME, LCNS_GET_DATE, LCNS_EXPIRE_DATE)
	VALUES (10000, 'Standard Banking License', '2014-01-21', '2024-01-21')
INSERT INTO BANKING_LICENSE (EMP_ID, LCNS_NAME, LCNS_GET_DATE, LCNS_EXPIRE_DATE)
	VALUES (10001, 'Standard Banking License', '2016-01-21', '2026-01-21')
INSERT INTO BANKING_LICENSE (EMP_ID, LCNS_NAME, LCNS_GET_DATE, LCNS_EXPIRE_DATE)
	VALUES (10002, 'Standard Banking License', '2017-02-17', '2027-02-17')
INSERT INTO BANKING_LICENSE (EMP_ID, LCNS_NAME, LCNS_GET_DATE, LCNS_EXPIRE_DATE)
	VALUES (10003, 'Standard Banking License', '2016-01-17', '2026-01-17')
INSERT INTO BANKING_LICENSE (EMP_ID, LCNS_NAME, LCNS_GET_DATE, LCNS_EXPIRE_DATE)
	VALUES (10004, 'Standard Banking License', '2015-11-21', '2025-11-21')
INSERT INTO BANKING_LICENSE (EMP_ID, LCNS_NAME, LCNS_GET_DATE, LCNS_EXPIRE_DATE)
	VALUES (10005, 'Standard Banking License', '2014-01-21', '2024-01-21')
INSERT INTO BANKING_LICENSE (EMP_ID, LCNS_NAME, LCNS_GET_DATE, LCNS_EXPIRE_DATE)
	VALUES (10006, 'Standard Banking License', '2016-03-11', '2026-03-11')
INSERT INTO BANKING_LICENSE (EMP_ID, LCNS_NAME, LCNS_GET_DATE, LCNS_EXPIRE_DATE)
	VALUES (10007, 'Standard Banking License', '2016-11-21', '2026-11-21')
INSERT INTO BANKING_LICENSE (EMP_ID, LCNS_NAME, LCNS_GET_DATE, LCNS_EXPIRE_DATE)
	VALUES (10008, 'Standard Banking License', '2015-01-21', '2025-01-21')
INSERT INTO BANKING_LICENSE (EMP_ID, LCNS_NAME, LCNS_GET_DATE, LCNS_EXPIRE_DATE)
	VALUES (10009, 'Standard Banking License', '2019-02-01', '2029-02-01')
GO

CREATE TABLE SERVICE (
	EMP_ID			INT					FOREIGN KEY REFERENCES EMPLOYEE(EMP_ID) CHECK(EMP_ID > 9999 AND EMP_ID <= 99999),
	CLNT_ID			INT					CHECK(CLNT_ID > 9999 AND CLNT_ID <= 99999),
	SERV_TIME		DATETIME			NOT NULL,
	SERV_TYPE		VARCHAR(20)			NOT NULL,
	PRIMARY KEY (EMP_ID, CLNT_ID)
)
GO

INSERT INTO SERVICE VALUES (10011, 10000, '2020-01-01 12:55:22', 'Opening account')
INSERT INTO SERVICE VALUES (10012, 10001, '2020-02-22 13:45:32', 'Closing account')
INSERT INTO SERVICE VALUES (10011, 10002, '2018-03-21 14:15:26', 'Help with deposit')
INSERT INTO SERVICE VALUES (10013, 10003, '2018-01-13 12:43:52', 'Opening account')
INSERT INTO SERVICE VALUES (10011, 10004, '2017-04-14 16:32:42', 'Help with deposit')
INSERT INTO SERVICE VALUES (10012, 10005, '2018-06-21 17:55:23', 'Help with deposit')
INSERT INTO SERVICE VALUES (10013, 10006, '2020-11-23 18:32:12', 'Opening account')
INSERT INTO SERVICE VALUES (10011, 10007, '2019-12-06 19:51:23', 'Closing account')
INSERT INTO SERVICE VALUES (10012, 10008, '2020-12-05 08:44:43', 'Opening account')
INSERT INTO SERVICE VALUES (10013, 10009, '2020-07-03 09:21:54', 'Help with deposit')
GO

CREATE TABLE CLIENT (
	CLNT_ID				INT	IDENTITY(10000, 1)			PRIMARY KEY CHECK(CLNT_ID > 9999 AND CLNT_ID <= 99999),
	CLNT_FNAME			VARCHAR(50)						NOT NULL,
	CLNT_LNAME			VARCHAR(50)						NOT NULL,
	CLNT_MNAME			VARCHAR(50),
	CLNT_PHONE_NUM		CHAR(10),
	CLNT_ADDRESS		VARCHAR(70)						NOT NULL,
	CLNT_IS_BLKLST		INT								NOT NULL CHECK(CLNT_IS_BLKLST > -1 AND CLNT_IS_BLKLST < 2)
)
GO

INSERT INTO CLIENT (CLNT_FNAME, CLNT_LNAME, CLNT_MNAME, CLNT_PHONE_NUM, CLNT_ADDRESS, CLNT_IS_BLKLST)
	VALUES ('Ethan', 'Yang', NULL, '7789283829', 'IS7 8DX, 123 Avenue, Surrey, BC, CA', 0)
INSERT INTO CLIENT (CLNT_FNAME, CLNT_LNAME, CLNT_MNAME, CLNT_PHONE_NUM, CLNT_ADDRESS, CLNT_IS_BLKLST)
	VALUES ('Phil', 'Yu', NULL, NULL, 'KS8 ASX, Pinball Avenue, Burnaby, BC, CA', 0)
INSERT INTO CLIENT (CLNT_FNAME, CLNT_LNAME, CLNT_MNAME, CLNT_PHONE_NUM, CLNT_ADDRESS, CLNT_IS_BLKLST)
	VALUES ('William', 'Sung', NULL, '6038263921', '123 ASD, Totem Street, Surrey, BC, CA', 0)
INSERT INTO CLIENT (CLNT_FNAME, CLNT_LNAME, CLNT_MNAME, CLNT_PHONE_NUM, CLNT_ADDRESS, CLNT_IS_BLKLST)
	VALUES ('Mattias', 'Jones', NULL, NULL, 'FGS 823, Dill Street, Delta, BC, CA', 1)
INSERT INTO CLIENT (CLNT_FNAME, CLNT_LNAME, CLNT_MNAME, CLNT_PHONE_NUM, CLNT_ADDRESS, CLNT_IS_BLKLST)
	VALUES ('Charlie', 'Shu', 'Jr.', '7789283648', '12S ASC, Totem Street, Surrey, BC, CA', 0)
INSERT INTO CLIENT (CLNT_FNAME, CLNT_LNAME, CLNT_MNAME, CLNT_PHONE_NUM, CLNT_ADDRESS, CLNT_IS_BLKLST)
	VALUES ('Xu', 'Yue', NULL, '7782938494', '123 KSD, Alexa Street, Burnaby, BC, CA', 1)
INSERT INTO CLIENT (CLNT_FNAME, CLNT_LNAME, CLNT_MNAME, CLNT_PHONE_NUM, CLNT_ADDRESS, CLNT_IS_BLKLST)
	VALUES ('Lily', 'Wang', 'Chen', '6046553728', 'KS8 09D, Dill Street, Delta, CA', 0)
INSERT INTO CLIENT (CLNT_FNAME, CLNT_LNAME, CLNT_MNAME, CLNT_PHONE_NUM, CLNT_ADDRESS, CLNT_IS_BLKLST)
	VALUES ('Wendy', 'Wang', NULL, '7788392836', 'NV8 AZX, 827 Blvd, Surrey, BC, CA', 0)
INSERT INTO CLIENT (CLNT_FNAME, CLNT_LNAME, CLNT_MNAME, CLNT_PHONE_NUM, CLNT_ADDRESS, CLNT_IS_BLKLST)
	VALUES ('Dandelion', 'Gray', NULL, '6048372617', '23A ZXS, Barrel Road, Burnaby, BC, CA', 0)
INSERT INTO CLIENT (CLNT_FNAME, CLNT_LNAME, CLNT_MNAME, CLNT_PHONE_NUM, CLNT_ADDRESS, CLNT_IS_BLKLST)
	VALUES ('Ray', 'Xi', NULL, NULL, '2AS SCX, Pickle Road, Delta, BC, CA', 0)
GO

ALTER TABLE SERVICE
	ADD FOREIGN KEY (CLNT_ID) REFERENCES CLIENT(CLNT_ID)

CREATE TABLE LOAN (
	LOAN_ID						INT IDENTITY(10000, 1)			PRIMARY KEY CHECK(LOAN_ID > 9999 AND LOAN_ID <= 99999),
	CLNT_ID						INT								FOREIGN KEY REFERENCES CLIENT(CLNT_ID) NOT NULL CHECK(CLNT_ID > 9999 AND CLNT_ID <= 99999),
	FSR_EMP_ID					INT								FOREIGN KEY REFERENCES EMPLOYEE(EMP_ID) NOT NULL CHECK(FSR_EMP_ID > 9999 AND FSR_EMP_ID <= 99999),
	LOAN_ACCEPTANCE_STATUS		INT								NOT NULL CHECK(LOAN_ACCEPTANCE_STATUS > -1 AND LOAN_ACCEPTANCE_STATUS < 2),
	LOAN_AMOUNT					NUMERIC(10, 2)					NOT NULL CHECK(LOAN_AMOUNT >= 0 AND LOAN_AMOUNT <= 99999999.99),
	LOAN_INTEREST_RATE			NUMERIC(5, 4)					NOT NULL CHECK(LOAN_INTEREST_RATE >= 0 AND LOAN_INTEREST_RATE <= 9.9999),
	LOAN_DUE_DATE				DATE							NOT NULL,
	LOAN_TO_BE_PAID				NUMERIC(10, 2)					NOT NULL CHECK(LOAN_TO_BE_PAID >= 0 AND LOAN_TO_BE_PAID <= 99999999.99),
	LOAN_IS_PAID				INT								NOT NULL CHECK(LOAN_IS_PAID > -1 AND LOAN_IS_PAID < 2)
)
GO

INSERT INTO LOAN VALUES (10000, 10011, 0, 6000, 5.9999, '2023-09-24', 7123.23, 0)
INSERT INTO LOAN VALUES (10000, 10012, 1, 7800, 9.9998, '2019-12-12', 9123.66, 0)
INSERT INTO LOAN VALUES (10001, 10012, 1, 10000, 6, '2018-11-11', 1322.92, 0)
INSERT INTO LOAN VALUES (10001, 10011, 0, 8000, 4, '2026-08-22', 9202.22, 0)
INSERT INTO LOAN VALUES (10002, 10012, 0, 50000, 8, '2027-04-16', 51092.29, 0)
INSERT INTO LOAN VALUES (10003, 10011, 0, 20000, 7, '2025-03-17', 21293.25, 0)
INSERT INTO LOAN VALUES (10004, 10013, 0, 10000, 4.25, '2024-02-14', 11123.23, 0)
INSERT INTO LOAN VALUES (10008, 10013, 0, 15000, 3.33, '2023-05-15', 15123.66, 0)
INSERT INTO LOAN VALUES (10008, 10013, 0, 15000, 5.5, '2022-05-17', 15156.32, 0)
INSERT INTO LOAN VALUES (10007, 10011, 0, 5000, 9.9949, '2023-06-06', 6123.23, 0)
GO

CREATE TABLE SUPPORT_TICKET (
	TKT_ID					INT	IDENTITY(10000, 1)			PRIMARY KEY CHECK(TKT_ID > 9999 AND TKT_ID <= 99999),
	CLNT_ID					INT								FOREIGN KEY REFERENCES CLIENT(CLNT_ID) NOT NULL CHECK(CLNT_ID > 9999 AND CLNT_ID <= 99999),
	CS_EMP_ID				INT								FOREIGN KEY REFERENCES EMPLOYEE(EMP_ID) NOT NULL CHECK(CS_EMP_ID > 9999 AND CS_EMP_ID <= 99999),
	TKT_DESCRIPTION			VARCHAR(250)					NOT NULL,
	TKT_OPEN_TIME			DATETIME						NOT NULL
)
GO

INSERT INTO SUPPORT_TICKET VALUES (10000, 10011, 'Helping the customer with online deposits and withdraws', '2020-03-12 12:42:24')
INSERT INTO SUPPORT_TICKET VALUES (10001, 10012, 'Helping the customer with online deposits and withdraws', '2020-04-21 14:23:33')
INSERT INTO SUPPORT_TICKET VALUES (10002, 10013, 'Closing the customer account', '2019-04-14 16:23:32')
INSERT INTO SUPPORT_TICKET VALUES (10003, 10011, 'Transfering funds over accounts', '2019-06-11 08:42:15')
INSERT INTO SUPPORT_TICKET VALUES (10004, 10012, 'Helping with loan application', '2018-01-12 09:52:33')
INSERT INTO SUPPORT_TICKET VALUES (10004, 10011, 'Help with credit card application', '2017-11-14 09:51:59')
INSERT INTO SUPPORT_TICKET VALUES (10006, 10013, 'Answering common Q&A questions', '2019-12-16 14:12:23')
INSERT INTO SUPPORT_TICKET VALUES (10007, 10011, 'Helping the customer with online deposits and withdraws', '2019-09-17 13:23:41')
INSERT INTO SUPPORT_TICKET VALUES (10009, 10012, 'Helping the customer manage co-owners', '2020-08-18 10:31:51')
INSERT INTO SUPPORT_TICKET VALUES (10007, 10011, 'Helping the customer with online deposits and withdraws', '2020-07-26 11:41:59')
GO

CREATE TABLE OWNERSHIP (
	CLNT_ID			INT					FOREIGN KEY REFERENCES CLIENT(CLNT_ID) CHECK(CLNT_ID > 9999 AND CLNT_ID <= 99999),
	ACC_ID			INT					CHECK(ACC_ID > 9999 AND ACC_ID <= 99999),
	OWN_TYPE		VARCHAR(20)			NOT NULL,
	PRIMARY KEY (CLNT_ID, ACC_ID)
)
GO

INSERT INTO OWNERSHIP VALUES (10000, 10000,'Joint ownership')
INSERT INTO OWNERSHIP VALUES (10001, 10000,'Joint ownership')
INSERT INTO OWNERSHIP VALUES (10002, 10001,'Sole ownership')
INSERT INTO OWNERSHIP VALUES (10003, 10002,'Sole ownership')
INSERT INTO OWNERSHIP VALUES (10004, 10003,'Joint ownership')
INSERT INTO OWNERSHIP VALUES (10005, 10003,'Joint ownership')
INSERT INTO OWNERSHIP VALUES (10006, 10004,'Sole ownership')
INSERT INTO OWNERSHIP VALUES (10007, 10005,'Sole ownership')
INSERT INTO OWNERSHIP VALUES (10008, 10006,'Joint ownership')
INSERT INTO OWNERSHIP VALUES (10009, 10006,'Joint ownership')
GO

CREATE TABLE ACCOUNT (
	ACC_ID					INT	IDENTITY(10000, 1)			PRIMARY KEY CHECK(ACC_ID > 9999 AND ACC_ID <= 99999),
	ACC_TYPE				VARCHAR(10)						NOT NULL,
	ACC_OPEN_DATE			DATE							NOT NULL,
	ACC_BALANCE				NUMERIC(10, 2)					CHECK(ACC_BALANCE >= 0 AND ACC_BALANCE <= 99999999.99)
)
GO

INSERT INTO ACCOUNT VALUES ('Checking', '2018-03-23', 789.24)
INSERT INTO ACCOUNT VALUES ('Savings', '2019-04-13', 12342.42)
INSERT INTO ACCOUNT VALUES ('Checking', '2018-05-23', 23423.55)
INSERT INTO ACCOUNT VALUES ('Savings', '2019-07-15', 123412.12)
INSERT INTO ACCOUNT VALUES ('Savings', '2020-01-01', 83729.92)
INSERT INTO ACCOUNT VALUES ('Credit', '2020-08-04', 3823.82)
INSERT INTO ACCOUNT VALUES ('Credit', '2019-01-01', 8239.83)
GO

ALTER TABLE OWNERSHIP
	ADD FOREIGN KEY (ACC_ID) REFERENCES ACCOUNT(ACC_ID)

CREATE TABLE TRNSACTION (
	TRN_ID				INT	IDENTITY(10000, 1)				PRIMARY KEY CHECK(TRN_ID > 9999 AND TRN_ID <= 99999),
	ACC_ID				INT									FOREIGN KEY REFERENCES ACCOUNT(ACC_ID) NOT NULL CHECK(ACC_ID > 9999 AND ACC_ID <= 99999),
	TRN_TIME			DATETIME							NOT NULL,
	TRN_AMOUNT			NUMERIC(10, 2)						NOT NULL CHECK(TRN_AMOUNT >= -99999999.99 AND TRN_AMOUNT <= 99999999.99),
)
GO

INSERT INTO TRNSACTION VALUES (10000, '2019-03-22 12:32:12', -250)
INSERT INTO TRNSACTION VALUES (10001, '2020-02-16 13:42:32', 1234)
INSERT INTO TRNSACTION VALUES (10001, '2020-12-12 14:13:43', 652)
INSERT INTO TRNSACTION VALUES (10000, '2019-06-15 08:42:53', -12344)
INSERT INTO TRNSACTION VALUES (10002, '2018-07-07 15:35:54', 234)
INSERT INTO TRNSACTION VALUES (10003, '2020-08-06 16:53:15', -63)
INSERT INTO TRNSACTION VALUES (10004, '2020-11-05 08:52:12', 346)
INSERT INTO TRNSACTION VALUES (10005, '2019-02-16 17:15:32', -2)
INSERT INTO TRNSACTION VALUES (10006, '2019-09-08 18:25:23', 123)
INSERT INTO TRNSACTION VALUES (10005, '2018-11-01 08:35:12', -53)
GO

CREATE TABLE CLIENT_CARD (
	CLNT_CARD_ID				INT	IDENTITY(10000, 1)			PRIMARY KEY CHECK(CLNT_CARD_ID > 9999 AND CLNT_CARD_ID <= 99999),
	ACC_ID						INT								FOREIGN KEY REFERENCES ACCOUNT(ACC_ID) NOT NULL CHECK(ACC_ID > 9999 AND ACC_ID <= 99999),
	CLNT_CARD_HOLDER_NAME		VARCHAR(50)						NOT NULL,
	CLNT_CARD_NUM				CHAR(16)						NOT NULL
)
GO

INSERT INTO CLIENT_CARD VALUES (10000, 'Ethan Yang', 1263748596857463)
INSERT INTO CLIENT_CARD VALUES (10000, 'Phil Yu', 1827364968574326)
INSERT INTO CLIENT_CARD VALUES (10001, 'William Sung', 2938475219484632)
INSERT INTO CLIENT_CARD VALUES (10002, 'Mattias Jones', 1926532957685046)
INSERT INTO CLIENT_CARD VALUES (10003, 'Charlie Shu Jr.', 1029322869574265)
INSERT INTO CLIENT_CARD VALUES (10003, 'Xu Yue', 2938532960584327)
INSERT INTO CLIENT_CARD VALUES (10004, 'Lily Wang Chen', 2937864539675847)
GO

CREATE TABLE CREDIT_CARD (
	CRED_CARD_ID				INT	IDENTITY(10000, 1)			PRIMARY KEY CHECK(CRED_CARD_ID > 9999 AND CRED_CARD_ID <= 99999),
	ACC_ID						INT								FOREIGN KEY REFERENCES ACCOUNT(ACC_ID) NOT NULL CHECK(ACC_ID > 9999 AND ACC_ID <= 99999),
	CRED_CARD_HOLDER_NAME		VARCHAR(50)						NOT NULL,
	CRED_CARD_NUM				CHAR(16)						NOT NULL,
	CRED_CARD_EXPIRE_DATE		DATE							NOT NULL,
	CRED_CARD_CVV_CODE			CHAR(3)							NOT NULL
)
GO

INSERT INTO CREDIT_CARD VALUES (10005, 'Wendy Wang', 2837532968745387, '2022-01-22', 775)
INSERT INTO CREDIT_CARD VALUES (10006, 'Dandelion Gray', 6501328987463789, '2024-07-23', 475)
INSERT INTO CREDIT_CARD VALUES (10006, 'Ray Xi', 8987634325456765, '2023-03-08', 745)
GO

CREATE TABLE INVESTMENT_PORTFOLIO (
	PORT_ID					INT	IDENTITY(10000, 1)			PRIMARY KEY CHECK(PORT_ID > 9999 AND PORT_ID <= 99999),
	ACC_ID					INT								FOREIGN KEY REFERENCES ACCOUNT(ACC_ID) NOT NULL CHECK(ACC_ID > 9999 AND ACC_ID <= 99999),
	PORT_OPEN_DATE			DATE							NOT NULL,
	PORT_VALUE				NUMERIC(10, 2)					NOT NULL CHECK(PORT_VALUE >= 0 AND PORT_VALUE <= 99999999.99)
)
GO

INSERT INTO INVESTMENT_PORTFOLIO VALUES (10000, '2019-09-16', 8987.98)
INSERT INTO INVESTMENT_PORTFOLIO VALUES (10001, '2019-11-12', 2387.58)
INSERT INTO INVESTMENT_PORTFOLIO VALUES (10002, '2018-05-05', 832123.83)
INSERT INTO INVESTMENT_PORTFOLIO VALUES (10003, '2017-06-06', 7362.85)
GO

CREATE TABLE INVESTMENT_PRODUCT (
	PROD_ID				INT	IDENTITY(10000, 1)			PRIMARY KEY CHECK(PROD_ID > 9999 AND PROD_ID <= 99999),
	PORT_ID				INT								FOREIGN KEY REFERENCES INVESTMENT_PORTFOLIO(PORT_ID) NOT NULL CHECK(PORT_ID > 9999 AND PORT_ID <= 99999),
	PROD_TYPE			VARCHAR(30)						NOT NULL
)
GO

INSERT INTO INVESTMENT_PRODUCT VALUES (10000, 'Mutual funds')
INSERT INTO INVESTMENT_PRODUCT VALUES (10000, 'Bonds')
INSERT INTO INVESTMENT_PRODUCT VALUES (10001, 'Stocks')
INSERT INTO INVESTMENT_PRODUCT VALUES (10001, 'Mutual funds')
INSERT INTO INVESTMENT_PRODUCT VALUES (10002, 'Stocks')
INSERT INTO INVESTMENT_PRODUCT VALUES (10002, 'Bonds')
INSERT INTO INVESTMENT_PRODUCT VALUES (10002, 'Mutual funds')
INSERT INTO INVESTMENT_PRODUCT VALUES (10003, 'Bonds')
INSERT INTO INVESTMENT_PRODUCT VALUES (10003, 'Mutual funds')
INSERT INTO INVESTMENT_PRODUCT VALUES (10003, 'Stocks')
GO